<!doctype html>
<html lang="en" ng-app="restylingApp">
<head>
	<meta charset="utf-8">
	<title>D3 Deconstructor</title>	
	
	<link rel="stylesheet" type="text/css" href="display.css" />
	<link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap-theme.min.css" />
	<link rel="stylesheet" type="text/css" href="lib/ng-table.css" />
	<script src="lib/angular.min.js"></script>
	<script src="lib/ui-utils.js"></script>
	<script src="lib/simple_statistics.js"></script>
	<script src="lib/ng-table.js"></script>
	<script src="lib/d3.v3.min.js"></script>
	<script src="lib/underscore-min.js"></script>
	<script src="lib/jquery.js"></script>
	<script src="lib/bootstrap/js/bootstrap.min.js"></script>
	<script src="lib/jquery.dataTables.js"></script>
	<script src="lib/dataTables.apiPlugins.js"></script>
	<script src="lib/jstat.js"></script>
	<script src="display.js"></script>
</head>
<body ng-controller="MappingListCtrl">

<div id="wrapper">
	<div id="sidebar-wrapper">
	<span ng-repeat="(dataAttr, mapped) in dataSets[currentDataSet].mappings">
		<div ng-repeat="mappedAttr in mapped">
			<table class="table" style="width:300px;">
				<thead>
					<tr>
						<th>{{dataAttr}}</th>
						<th>{{mappedAttr[0]}}</th>
						<th>ID</th>
					</tr>
				</thead>
				<tr ng-if="!mappedAttr[1].hasOwnProperty('isNumericMapping')" ng-repeat="(from, to) in mappedAttr[1]">
					<td>{{from}}</td>
					<td>
						<input ng-keypress="submitNominalMappingChange($event, dataAttr, mappedAttr[0], to[1])" ng-model="to[0][0]">
						</input>
					</td>
					<td>{{to[1]}}</td>
				</tr>
				<tbody ng-if="mappedAttr[1].hasOwnProperty('isNumericMapping')">
					<tr>
						<td>Min: {{mappedAttr[1].dataMin}}</td>
						<td>
							Min: <input ng-keypress="submitLinearMappingChange($event, dataAttr, mappedAttr)" ng-model="mappedAttr[1].visMin">
						</td>
					</tr>
					<tr>
						<td>Max: {{mappedAttr[1].dataMax}}</td>
						<td>Max:
							<input ng-keypress="submitLinearMappingChange($event, dataAttr, mappedAttr)" ng-model="mappedAttr[1].visMax">
						</td>
						<td>{{mappedAttr[1].ids}}</td>
					</tr>
				</tbody>
			</table>
		</div>
	</span>
</div>


<div class="page-content-wrapper">
<div class="page-content">
	<div class="container" ng-repeat="dataSet in dataSets | orderBy: '-numEls':false">
		<button ng-click="selectDataSet(dataSet)">Select</button>
		<table class="table">
			<thead>
				<tr>
					<th ng-repeat="(prop, val) in dataSet.d3Data">{{prop}}</th>
					<th>Mark</th>
				</tr>
			</thead>
			<tr ng-repeat="i in _.range(0, dataSet.numEls)" ng-click="toggleSelect($parent.$index, i)" ng-class="itemClass($parent.$index, i)">
				<td ng-repeat="(prop, val) in dataSet.d3Data">{{val[i]}}</td>
				<td svg-inject></td>
			</tr>
		</table>
	</div>
</div>
</div>
</body>
</html>